[build]
  publish = "public"
  command = "npx prisma generate"

[functions]
  directory = "netlify/functions"
  node_bundler = "esbuild"

# KC Roof Restoration flows (more specific paths first)
[[redirects]]
  from = "/kcroofrestoration/roof-claim-denial"
  to = "/.netlify/functions/flow-roof-claim-denial?tenant=kcroofrestoration"
  status = 200
  force = true

[[redirects]]
  from = "/kcroofrestoration/roof-spray-vs-sealant-options"
  to = "/.netlify/functions/flow-roof-spray-options?tenant=kcroofrestoration"
  status = 200
  force = true

[[redirects]]
  from = "/kcroofrestoration/dirty-roof-costs"
  to = "/.netlify/functions/flow-dirty-roof-costs?tenant=kcroofrestoration"
  status = 200
  force = true

[[redirects]]
  from = "/kcroofrestoration/photos"
  to = "/.netlify/functions/page?tenant=kcroofrestoration"
  status = 200
  force = true

[[redirects]]
  from = "/kcroofrestoration/instant-roof-quote"
  to = "/.netlify/functions/page?tenant=kcroofrestoration"
  status = 200
  force = true

# KC Roof index page (after specific routes)
[[redirects]]
  from = "/kcroofrestoration"
  to = "/.netlify/functions/tenant-index?tenant=kcroofrestoration"
  status = 200
  force = true

# Bud Roofing flows (more specific paths first)
[[redirects]]
  from = "/budroofing/roof-claim-denial"
  to = "/.netlify/functions/flow-roof-claim-denial?tenant=budroofing"
  status = 200
  force = true

[[redirects]]
  from = "/budroofing/photos"
  to = "/.netlify/functions/page?tenant=budroofing"
  status = 200
  force = true

[[redirects]]
  from = "/budroofing/instant-roof-quote"
  to = "/.netlify/functions/page?tenant=budroofing"
  status = 200
  force = true

# Bud Roofing index page (after specific routes)
[[redirects]]
  from = "/budroofing"
  to = "/.netlify/functions/budroofing"
  status = 200
  force = true
